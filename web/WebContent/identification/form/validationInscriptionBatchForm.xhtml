<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	<h:body>
		
		<ui:composition template="/template/commun.xhtml">
			
			<ui:define name="contenu">
				<h1>Liste des inscriptions à valider</h1>
				<h:form id="form">
					<p:messages id="messages" />
					<p:dataTable value="#{validationInscriptionController.inscriptions}" var="inscription" rowIndexVar="index" selection="#{validationInscriptionController.inscriptions}"
					 rowKey="#{inscription.code}"  >
						<f:facet name="header">Liste des inscriptions à valider</f:facet>
						<p:column selectionMode="multiple" style="width:2%" />
						<p:column headerText="N°" ><h:outputText value="#{index+1}" /></p:column>
						<p:column headerText="Date" >
							<h:outputText value="#{inscription.dateCreation}" >
								<f:convertDateTime pattern="#{validationInscriptionController.datePattern}" />
							</h:outputText>
						</p:column>
						<p:column headerText="Type" ><h:outputText value="#{inscription.type}" /></p:column>
						<p:column headerText="Matricule" ><h:outputText value="#{inscription.matricule}" /></p:column>
						<p:column headerText="Nom et prénoms" ><h:outputText value="#{inscription.beneficiaireInfos.nomPrenoms}" /></p:column>
						<p:column >
							<p:commandButton value="Détails" oncomplete="PF('detailsDialog').show();" update=":form:display">
								<f:setPropertyActionListener value="#{inscription}" target="#{validationInscriptionController.inscriptionSelectionne}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
					
					<p:commandButton value="Valider" icon="ui-icon-check" action="#{validationInscriptionController.valider}" update="messages"/>
					
					<p:dialog header="Détails de l'inscription" widgetVar="detailsDialog" modal="true" appendTo="@(Body)" >
					
					    <h:panelGrid id="display" columns="2" >  
	  						
	  						<h:outputText value="Code :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.code}" />
	  						
	            			<h:outputText value="Date :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.dateCreation}">
	            				<f:convertDateTime pattern="#{validationInscriptionController.datePattern}" />
	            			</h:outputText> 
	            			
	            			<h:outputText value="Matricule :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.matricule}" />
	            			
	            			<h:outputText value="Nom et prénoms :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.beneficiaireInfos.nomPrenoms}" />
	            			
	            			<h:outputText value="Date de naissance : " />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.beneficiaireInfos.dateNaissance}" >
	            				<f:convertDateTime pattern="#{validationInscriptionController.datePattern}" />
	            			</h:outputText>   
	            			
	            			<h:outputText value="Fonction :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.fonction}" />
	            			
	            			<h:outputText value="Catégorie :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.categorie}" />
	            			
	            			<h:outputText value="Ministère :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.ministere}" />
	            			
	            			<h:outputText value="Boite postale :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.beneficiaireInfos.contact.boitePostale}" />
	            			
	            			<h:outputText value="Téléphone :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.beneficiaireInfos.contact.telephone}" />
	            			
	            			<h:outputText value="Email :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.beneficiaireInfos.contact.email}" />
	            			
	            			<h:outputText value="Grade :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.grade}" />
	            			
	            			<h:outputText value="Echelon :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.echelon}" />
	            			
	            			<h:outputText value="Position :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.position}" />
	            			
	            			<h:outputText value="Indice :" />  
	            			<h:outputText value="#{validationInscriptionController.inscriptionSelectionne.indice}" />
	  
	        			</h:panelGrid>  
						
					</p:dialog> 
					
				</h:form>
				
				
				
			</ui:define>
			
			
		</ui:composition>

	</h:body>

</html>